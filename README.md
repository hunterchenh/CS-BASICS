# CS-BASICS


### TCP 为什么三次握手而不是两次握手?

《计算机网络》书中的回答：防止已经失效的连接请求报文被服务器接收，因而导致错误。（可能的一种情形是：由于网络问题，连接请求报文滞留在网络中发生超时，客户端一定时间后超时重传，服务端正确正确接收到重传的报文后建立了连接，然后完成了传输任务并关闭了连接。后来网络状况好时，之前滞留的超时连接请求报文又传输到服务端，服务端又建立了连接，而此时客户端并没有发起连接，所以直接丢弃服务端发来的连接请求报文的确认报文。导致服务端傻乎乎的一直等待客户端发送数据。）

![image](https://user-images.githubusercontent.com/14309519/148020739-d4c56018-09f3-4ef3-879e-224bcb267690.png)

网络通信要保证连接的可靠性，一般是通过确认机制实现的，如果只有两次握手，客户端收到服务端发来的连接请求报文的确认报文，只能确定服务端的状态，而服务端并不能确定客户端的状态。如果是三次握手，服务端就能通过客户端发来的连接请求的确认的确认，确定客户端的状态。
